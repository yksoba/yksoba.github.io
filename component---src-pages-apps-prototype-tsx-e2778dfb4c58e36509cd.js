"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[845],{7256:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=n(6720),i=n(1344),a=n(7294),r=n(4578),s=n(9477);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}let u=function(){var e,t,n,o=i.prototype;function i(){this._didInit=!1,this._resizeObserver=new ResizeObserver((()=>this._resize())),this._renderer=new s.CP7,this._layers=[new s.xsS],this.camera=new s.V1s,document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._pause():this._start()}))}return o.layer=function(e,t){for(;this._layers.length<=e;)this._layers.push(new s.xsS);return t&&(this._layers[e]=t),this._layers[e]},o.mount=function(e){(this._container||this._renderer)&&this.unmount(),this._container=e,e.appendChild(this._renderer.domElement),this._didInit||(this.init(),this._didInit=!0),this._resize(),this._resizeObserver.observe(e),this._start()},o.unmount=function(){var e,t,n;this._pause(),this._container&&this._resizeObserver.unobserve(this._container),null===(e=this._container)||void 0===e||e.removeChild(null===(t=this._renderer)||void 0===t?void 0:t.domElement),null===(n=this._container)||void 0===n||n.removeEventListener("resize",this._resize),this._container=void 0},o._resize=function(){if(this._container&&this._renderer){const{clientWidth:e,clientHeight:t}=this._container;this._renderer.setSize(e,t),this.updateCamera(e,t,this.camera)}},o._loop=function(e){const t=e&&this._lastTime?e-this._lastTime:0;if(this._lastTime=e,this.tick(t),this._renderer&&this._layers.length>0&&this.camera)if(1===this._layers.length)this._renderer.autoClear=!0,this._renderer.render(this.scene,this.camera);else{this._renderer.autoClear=!1,this._renderer.clear();for(const e of this._layers)this._renderer.render(e,this.camera),this._renderer.clearDepth()}this._animationFrame=requestAnimationFrame((e=>this._loop(e)))},o._start=function(){this._animationFrame||this._loop()},o._pause=function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0),this._lastTime=void 0},e=i,(t=[{key:"renderer",get:function(){return this._renderer}},{key:"scene",get:function(){return this._layers[0]},set:function(e){this._layers[0]=e}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();const h={type:"change"},p={type:"start"},d={type:"end"};class b extends s.pBf{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new s.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:s.RsA.ROTATE,MIDDLE:s.RsA.DOLLY,RIGHT:s.RsA.PAN},this.touches={ONE:s.QmN.ROTATE,TWO:s.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(h),n.update(),i=o.NONE},this.update=function(){const t=new s.Pa4,p=(new s._fP).setFromUnitVectors(e.up,new s.Pa4(0,1,0)),d=p.clone().invert(),b=new s.Pa4,f=new s._fP,E=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(p),r.setFromVector3(t),n.autoRotate&&i===o.NONE&&N(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(r.theta+=c.theta*n.dampingFactor,r.phi+=c.phi*n.dampingFactor):(r.theta+=c.theta,r.phi+=c.phi);let s=n.minAzimuthAngle,g=n.maxAzimuthAngle;return isFinite(s)&&isFinite(g)&&(s<-Math.PI?s+=E:s>Math.PI&&(s-=E),g<-Math.PI?g+=E:g>Math.PI&&(g-=E),r.theta=s<=g?Math.max(s,Math.min(g,r.theta)):r.theta>(s+g)/2?Math.max(s,r.theta):Math.min(g,r.theta)),r.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=l,r.radius=Math.max(n.minDistance,Math.min(n.maxDistance,r.radius)),!0===n.enableDamping?n.target.addScaledVector(m,n.dampingFactor):n.target.add(m),t.setFromSpherical(r),t.applyQuaternion(d),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),m.set(0,0,0)),l=1,!!(u||b.distanceToSquared(n.object.position)>a||8*(1-f.dot(n.object.quaternion))>a)&&(n.dispatchEvent(h),b.copy(n.object.position),f.copy(n.object.quaternion),u=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",B),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",K),n.domElement.removeEventListener("wheel",V),n.domElement.removeEventListener("pointermove",X),n.domElement.removeEventListener("pointerup",U),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Q)};const n=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=o.NONE;const a=1e-6,r=new s.$V,c=new s.$V;let l=1;const m=new s.Pa4;let u=!1;const b=new s.FM8,f=new s.FM8,E=new s.FM8,g=new s.FM8,y=new s.FM8,v=new s.FM8,_=new s.FM8,P=new s.FM8,w=new s.FM8,O=[],T={};function A(){return Math.pow(.95,n.zoomSpeed)}function N(e){c.theta-=e}function M(e){c.phi-=e}const L=function(){const e=new s.Pa4;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),m.add(e)}}(),j=function(){const e=new s.Pa4;return function(t,o){!0===n.screenSpacePanning?e.setFromMatrixColumn(o,1):(e.setFromMatrixColumn(o,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),m.add(e)}}(),k=function(){const e=new s.Pa4;return function(t,o){const i=n.domElement;if(n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let r=e.length();r*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*r/i.clientHeight,n.object.matrix),j(2*o*r/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),j(o*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function x(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),u=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function S(e){b.set(e.clientX,e.clientY)}function F(e){g.set(e.clientX,e.clientY)}function C(){if(1===O.length)b.set(O[0].pageX,O[0].pageY);else{const e=.5*(O[0].pageX+O[1].pageX),t=.5*(O[0].pageY+O[1].pageY);b.set(e,t)}}function I(){if(1===O.length)g.set(O[0].pageX,O[0].pageY);else{const e=.5*(O[0].pageX+O[1].pageX),t=.5*(O[0].pageY+O[1].pageY);g.set(e,t)}}function Y(){const e=O[0].pageX-O[1].pageX,t=O[0].pageY-O[1].pageY,n=Math.sqrt(e*e+t*t);_.set(0,n)}function z(e){if(1==O.length)f.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);f.set(n,o)}E.subVectors(f,b).multiplyScalar(n.rotateSpeed);const t=n.domElement;N(2*Math.PI*E.x/t.clientHeight),M(2*Math.PI*E.y/t.clientHeight),b.copy(f)}function D(e){if(1===O.length)y.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);y.set(n,o)}v.subVectors(y,g).multiplyScalar(n.panSpeed),k(v.x,v.y),g.copy(y)}function Z(e){const t=q(e),o=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(o*o+i*i);P.set(0,a),w.set(0,Math.pow(P.y/_.y,n.zoomSpeed)),R(w.y),_.copy(P)}function H(e){!1!==n.enabled&&(0===O.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",X),n.domElement.addEventListener("pointerup",U)),function(e){O.push(e)}(e),"touch"===e.pointerType?function(e){switch(W(e),O.length){case 1:switch(n.touches.ONE){case s.QmN.ROTATE:if(!1===n.enableRotate)return;C(),i=o.TOUCH_ROTATE;break;case s.QmN.PAN:if(!1===n.enablePan)return;I(),i=o.TOUCH_PAN;break;default:i=o.NONE}break;case 2:switch(n.touches.TWO){case s.QmN.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&Y(),n.enablePan&&I(),i=o.TOUCH_DOLLY_PAN;break;case s.QmN.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&Y(),n.enableRotate&&C(),i=o.TOUCH_DOLLY_ROTATE;break;default:i=o.NONE}break;default:i=o.NONE}i!==o.NONE&&n.dispatchEvent(p)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case s.RsA.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),i=o.DOLLY;break;case s.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;F(e),i=o.PAN}else{if(!1===n.enableRotate)return;S(e),i=o.ROTATE}break;case s.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;S(e),i=o.ROTATE}else{if(!1===n.enablePan)return;F(e),i=o.PAN}break;default:i=o.NONE}i!==o.NONE&&n.dispatchEvent(p)}(e))}function X(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(W(e),i){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;z(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&Z(e),n.enablePan&&D(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&Z(e),n.enableRotate&&z(e)}(e),n.update();break;default:i=o.NONE}}(e):function(e){switch(i){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),E.subVectors(f,b).multiplyScalar(n.rotateSpeed);const t=n.domElement;N(2*Math.PI*E.x/t.clientHeight),M(2*Math.PI*E.y/t.clientHeight),b.copy(f),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){P.set(e.clientX,e.clientY),w.subVectors(P,_),w.y>0?R(A()):w.y<0&&x(A()),_.copy(P),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),v.subVectors(y,g).multiplyScalar(n.panSpeed),k(v.x,v.y),g.copy(y),n.update()}(e)}}(e))}function U(e){G(e),0===O.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",X),n.domElement.removeEventListener("pointerup",U)),n.dispatchEvent(d),i=o.NONE}function K(e){G(e)}function V(e){!1!==n.enabled&&!1!==n.enableZoom&&i===o.NONE&&(e.preventDefault(),n.dispatchEvent(p),function(e){e.deltaY<0?x(A()):e.deltaY>0&&R(A()),n.update()}(e),n.dispatchEvent(d))}function Q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:k(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:k(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function B(e){!1!==n.enabled&&e.preventDefault()}function G(e){delete T[e.pointerId];for(let t=0;t<O.length;t++)if(O[t].pointerId==e.pointerId)return void O.splice(t,1)}function W(e){let t=T[e.pointerId];void 0===t&&(t=new s.FM8,T[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){const t=e.pointerId===O[0].pointerId?O[1]:O[0];return T[t.pointerId]}n.domElement.addEventListener("contextmenu",B),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",K),n.domElement.addEventListener("wheel",V,{passive:!1}),this.update()}}var f,E;const g=null!==(E=(f=window).persistent)&&void 0!==E?E:f.persistent={};let y=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).controls=new b(t.camera,t.renderer.domElement),t}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=s.ntZ;{const e=new s._12(10,10),t=new s.EJi({color:16777215}),n=new s.Kj0(e,t);n.receiveShadow=!0,n.rotateX(-Math.PI/2),this.scene.add(n)}{const e=new s.cek(16720554,1,10,Math.PI/8);e.castShadow=!0,e.position.set(3,5,1),this.scene.add(e)}{const e=new s.cek(2271999,1,10,Math.PI/8);e.castShadow=!0,e.position.set(-5,5,1),this.scene.add(e)}g.camera?this.camera=g.camera:this.camera.position.set(0,1,2),g.controls?this.controls=g.controls:this.controls.target.set(0,1,0)},n.updateCamera=function(e,t,n){this.camera=new s.cPb(75,e/t,.1,1e3),n&&(this.camera.position.copy(n.position),this.camera.rotation.copy(n.rotation)),g.camera=this.camera;const o=this.controls;this.controls=new b(this.camera,this.renderer.domElement),o&&(this.controls.target.copy(o.target),this.controls.update()),g.controls=this.controls},n.tick=function(e){},t}(u);const v=e=>{let{gameRef:t}=e;const n=t.current,o=null==n?void 0:n.camera,{0:r,1:s}=(0,a.useState)(0);return(0,a.useEffect)((()=>{let e;const t=()=>{s((e=>+!e)),e=setTimeout(t,100)};return t(),()=>clearTimeout(e)}),[]),a.createElement(i.Z,{position:"absolute",left:0,bottom:0,m:2,p:1,borderRadius:1,bgcolor:"rgba(0,0,0,0.1)",color:"rgba(255,255,255,0.8)",textAlign:"right"},a.createElement("table",null,a.createElement("tbody",null,o&&a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement("td",null,"Camera pos: "),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"red"},o.position.x.toFixed(4)),","),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"green"},o.position.y.toFixed(4)),","),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"blue"},o.position.z.toFixed(4)))),a.createElement("tr",null,a.createElement("td",null,"Camera rot (",o.rotation.order,"): "),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"red"},o.rotation.x.toFixed(4)),","),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"green"},o.rotation.y.toFixed(4)),","),a.createElement("td",null,a.createElement(i.Z,{component:"span",color:"blue"},o.rotation.z.toFixed(4))))))))};var _=()=>{const e=(0,a.useRef)(),t=(0,a.useRef)(null);return(0,a.useEffect)((()=>{e.current=new y}),[]),(0,a.useEffect)((()=>{if(e.current&&t.current)return e.current.mount(t.current),()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.unmount()}}),[e.current,t.current]),a.createElement(a.Fragment,null,a.createElement(o.ZP,null),a.createElement(i.Z,{width:"100vw",height:"100vh"},a.createElement(i.Z,{width:"100%",height:"100%",ref:t}),a.createElement(v,{gameRef:e})))}}}]);
//# sourceMappingURL=component---src-pages-apps-prototype-tsx-e2778dfb4c58e36509cd.js.map